<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Stealth Client Preview</title>
    <style>
        :root {
            --main-blue: #5865f2;
            --bg-dark: #0d0d0d;
            --panel-bg: #121212;
            --header-bg: #0a0a0a;
            --module-bg: #1a1a1a;
            --border-color: #333333;
            --text-light: #eeeeee;
        }

        body {
            background: var(--bg-dark);
            color: var(--text-light);
            font-family: 'Segoe UI', sans-serif;
            height: 100vh;
            overflow: hidden;
            margin: 0;
            touch-action: none;
        }

        /* HUD */
        #hud { position: fixed; bottom: 20px; right: 20px; text-align: right; pointer-events: none; z-index: 50; }
        .hud-item { color: var(--main-blue); font-weight: bold; font-size: 18px; text-shadow: 2px 2px #000; margin-bottom: 2px; }

        /* SEARCH & FRIENDS */
        #top-bar { position: absolute; top: 15px; width: 100%; display: flex; justify-content: center; gap: 15px; z-index: 100; }
        .glass-box { background: rgba(20,20,20,0.95); border: 1px solid var(--border-color); padding: 10px 20px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.6); display: flex; align-items: center; }
        #search-bar { background: transparent; border: none; color: white; outline: none; width: 180px; }

        /* CATEGORIES */
        .category { position: absolute; width: 175px; background: var(--panel-bg); border: 1px solid var(--border-color); box-shadow: 0 8px 25px rgba(0,0,0,0.9); z-index: 10; border-radius: 4px; }
        .header { background: var(--header-bg); padding: 14px; font-weight: bold; font-size: 11px; text-align: center; cursor: move; border-bottom: 2px solid var(--main-blue); color: #fff; text-transform: uppercase; }

        /* MODULES */
        .module-list { display: none; background: var(--module-bg); }
        .module-list.open { display: block; }
        .module { padding: 12px 15px; font-size: 13px; color: #888; border-bottom: 1px solid #282828; cursor: pointer; transition: 0.2s; }
        .module.active { color: white; background: var(--main-blue); font-weight: bold; }

        /* MODALS */
        .modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 310px; background: var(--header-bg); border: 1px solid var(--main-blue); padding: 25px; display: none; z-index: 2000; border-radius: 12px; box-shadow: 0 0 50px #000; }
        .setting-row { display: flex; justify-content: space-between; margin: 12px 0; align-items: center; font-size: 13px; }
        .btn-action { background: var(--main-blue); border: none; color: white; width: 100%; padding: 12px; margin-top: 15px; cursor: pointer; border-radius: 6px; font-weight: bold; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; z-index: 1500; }
        
        /* INPUTS */
        input[type="range"] { width: 100px; accent-color: var(--main-blue); }
        input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--main-blue); }
        select { background: #222; color: #fff; border: 1px solid #444; padding: 4px; border-radius: 4px; }
    </style>
</head>
<body>

    <div class="overlay" id="overlay" onclick="closeModals()"></div>
    <div id="hud"></div>
    
    <div id="top-bar">
        <div class="glass-box"><input type="text" id="search-bar" placeholder="Cheat suchen..." onkeyup="filterHacks()"></div>
        <div class="glass-box" onclick="openFriends()" style="cursor:pointer; color:var(--main-blue); font-weight:bold;">FRIENDS</div>
    </div>

    <div class="modal" id="settings-modal">
        <h3 id="set-title" style="color:var(--main-blue); margin: 0 0 15px 0;">Settings</h3>
        <div id="set-content"></div>
        <button class="btn-action" onclick="closeModals()">SAVE</button>
    </div>

    <div class="modal" id="friends-modal">
        <h3 style="color:var(--main-blue); margin: 0 0 15px 0;">FRIEND MANAGER</h3>
        <div style="display:flex; gap:8px;">
            <input type="text" id="new-friend" placeholder="Name..." style="background:#1a1a1a; border:1px solid #333; color:white; flex:1; padding:8px; border-radius:4px;">
            <button onclick="addFriend()" style="background:var(--main-blue); border:none; color:white; padding:8px; border-radius:4px;">ADD</button>
        </div>
        <div id="friends-list" style="margin-top:10px; min-height:60px; background:#050505; border:1px solid #222; padding:10px;"></div>
        <button class="btn-action" onclick="closeModals()">CLOSE</button>
    </div>

    <script>
        // Modul-Konfiguration mit SPEZIFISCHEN Settings
        const config = {
            "Combat": [
                { name: "KillAura", settings: { Range: 4.2, CPS: 12, Mode: ["Switch", "Single", "Multi"], RayTrace: true } },
                { name: "Velocity", settings: { Horizontal: 0, Vertical: 0, Chance: 100 } },
                { name: "Reach", settings: { Reach: 3.5, Combo: false } },
                { name: "AutoTotem", settings: { Health: 4.5, Soft: true } },
                { name: "Criticals", settings: { Mode: ["Packet", "Jump", "MiniJump"] } }
            ],
            "Movement": [
                { name: "Fly", settings: { Speed: 1.5, Mode: ["Vanilla", "Motion", "Grim"], Damage: false } },
                { name: "Speed", settings: { Speed: 0.8, Jump: true, Mode: ["Bhop", "Strafe", "OnGround"] } },
                { name: "Step", settings: { Height: 1.5, Smooth: true } },
                { name: "LongJump", settings: { Boost: 2.5, AutoDisable: true } }
            ],
            "Visuals": [
                { name: "ESP", settings: { Players: true, Friends: true, "Aggro Mobs": false, "Passive Mobs": false, Items: false, Box: true, Tracers: false } },
                { name: "FullBright", settings: { Mode: ["Gamma", "Potion"] } },
                { name: "X-Ray", settings: { Opacity: 120, Diamonds: true, Iron: false } },
                { name: "Freecam", settings: { Speed: 1.0 } }
            ],
            "World": [
                { name: "Scaffold", settings: { Expand: 3, "Tower Speed": 0.8, SafeWalk: true, Rotations: true } },
                { name: "AutoMine", settings: { Range: 5.0, "Hardness Limit": 2.0 } }
            ]
        };

        let activeHacks = new Set();
        let friends = [];
        let modData = {}; // Speichert die aktuellen Werte der Settings

        function init() {
            let x = 30, y = 100, i = 0;
            for (let cat in config) {
                let win = document.createElement('div');
                win.className = 'category';
                win.style.left = x + 'px'; win.style.top = y + 'px';
                
                let head = document.createElement('div');
                head.className = 'header';
                head.textContent = cat;
                head.onclick = () => win.querySelector('.module-list').classList.toggle('open');
                
                let list = document.createElement('div');
                list.className = 'module-list';
                
                config[cat].forEach(mod => {
                    let id = mod.name.toLowerCase();
                    modData[id] = mod.settings; // Standardwerte laden
                    
                    let div = document.createElement('div');
                    div.className = 'module';
                    div.id = id;
                    div.textContent = mod.name;
                    
                    let start;
                    div.ontouchstart = () => { start = Date.now(); };
                    div.ontouchend = () => {
                        if(Date.now() - start > 600) openSettings(mod.name, id);
                        else toggle(mod.name, div);
                    };
                    div.onclick = () => toggle(mod.name, div);
                    div.ondblclick = () => openSettings(mod.name, id);
                    
                    list.appendChild(div);
                });

                win.appendChild(head); win.appendChild(list);
                document.body.appendChild(win);
                makeDraggable(win, head);
                x += 185; i++;
                if(i >= 4) { x = 30; y += 320; i = 0; }
            }
            loadState();
        }

        function toggle(name, el) {
            let id = name.toLowerCase();
            if(activeHacks.has(id)) { activeHacks.delete(id); el.classList.remove('active'); }
            else { activeHacks.add(id); el.classList.add('active'); }
            updateHUD();
            saveState();
        }

        function updateHUD() {
            let hud = document.getElementById('hud');
            hud.innerHTML = Array.from(activeHacks).sort().map(h => `<div class="hud-item">${h.charAt(0).toUpperCase() + h.slice(1)}</div>`).join('');
        }

        function openSettings(name, id) {
            document.getElementById('set-title').textContent = name + " SETTINGS";
            let content = document.getElementById('set-content');
            content.innerHTML = '';
            
            let settings = modData[id];
            for (let s in settings) {
                let row = document.createElement('div');
                row.className = 'setting-row';
                row.innerHTML = `<span>${s}</span>`;
                
                let val = settings[s];
                let input;
                
                if (typeof val === 'number') {
                    input = document.createElement('input');
                    input.type = 'range';
                    input.min = 0; input.max = val * 3 || 10; input.step = 0.1;
                    input.value = val;
                    input.oninput = (e) => { settings[s] = parseFloat(e.target.value); saveState(); };
                } else if (typeof val === 'boolean') {
                    input = document.createElement('input');
                    input.type = 'checkbox';
                    input.checked = val;
                    input.onchange = (e) => { settings[s] = e.target.checked; saveState(); };
                } else if (Array.isArray(val)) {
                    input = document.createElement('select');
                    val.forEach(opt => {
                        let o = document.createElement('option');
                        o.value = opt; o.textContent = opt;
                        input.appendChild(o);
                    });
                    input.onchange = (e) => { saveState(); };
                }
                
                row.appendChild(input);
                content.appendChild(row);
            }
            
            document.getElementById('settings-modal').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        function openFriends() {
            document.getElementById('friends-modal').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
            renderFriends();
        }

        function addFriend() {
            let n = document.getElementById('new-friend').value;
            if(n && !friends.includes(n)) { friends.push(n); document.getElementById('new-friend').value = ''; renderFriends(); saveState(); }
        }

        function renderFriends() {
            document.getElementById('friends-list').innerHTML = friends.map(f => `<span style="background:var(--main-blue); padding:3px 8px; border-radius:10px; margin:3px; display:inline-block; font-size:11px;">${f}</span>`).join('');
        }

        function closeModals() {
            document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
            document.getElementById('overlay').style.display = 'none';
        }

        function filterHacks() {
            let q = document.getElementById('search-bar').value.toLowerCase();
            document.querySelectorAll('.module').forEach(m => m.style.display = m.textContent.toLowerCase().includes(q) ? 'block' : 'none');
        }

        function makeDraggable(win, head) {
            let d = false, ox, oy;
            const s = (e) => { d = true; let c = e.touches ? e.touches[0] : e; ox = c.clientX - win.offsetLeft; oy = c.clientY - win.offsetTop; };
            const m = (e) => { if(!d) return; let c = e.touches ? e.touches[0] : e; win.style.left = (c.clientX-ox)+'px'; win.style.top = (c.clientY-oy)+'px'; };
            const e = () => d = false;
            head.addEventListener('mousedown', s); head.addEventListener('touchstart', s);
            window.addEventListener('mousemove', m); window.addEventListener('touchmove', m);
            window.addEventListener('mouseup', e); window.addEventListener('touchend', e);
        }

        function saveState() {
            localStorage.setItem('stealth_hacks', JSON.stringify(Array.from(activeHacks)));
            localStorage.setItem('stealth_friends', JSON.stringify(friends));
            localStorage.setItem('stealth_data', JSON.stringify(modData));
        }

        function loadState() {
            let h = localStorage.getItem('stealth_hacks'), f = localStorage.getItem('stealth_friends'), d = localStorage.getItem('stealth_data');
            if(h) { activeHacks = new Set(JSON.parse(h)); activeHacks.forEach(id => { let el = document.getElementById(id); if(el) el.classList.add('active'); }); updateHUD(); }
            if(f) { friends = JSON.parse(f); }
            if(d) { modData = JSON.parse(d); }
        }

        init();
    </script>
</body>
</html>
