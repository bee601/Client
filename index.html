<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Stealth Client | Ultra God Edition</title>
    <style>
        :root { --main: #5865f2; --bg: #050505; --win: #0f0f0f; --brd: #222; }
        body { background: var(--bg); color: #eee; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; touch-action: none; }
        #hud { position: fixed; top: 15px; left: 15px; pointer-events: none; z-index: 50; }
        .hud-mod { color: var(--main); font-weight: 900; font-size: 14px; text-shadow: 2px 2px #000; text-transform: uppercase; margin-bottom: 1px; }
        #panic-btn { position: fixed; top: 15px; right: 15px; background: #ff3e3e; color: white; border: none; padding: 10px 20px; border-radius: 4px; font-weight: bold; cursor: pointer; z-index: 1000; }
        #top-bar { position: absolute; top: 65px; width: 100%; display: flex; justify-content: center; gap: 10px; z-index: 100; }
        .box { background: var(--win); border: 1px solid var(--brd); padding: 10px; border-radius: 5px; }
        input[type="text"] { background: transparent; border: none; color: white; outline: none; width: 220px; font-family: monospace; }
        .window { position: absolute; width: 170px; background: var(--win); border: 1px solid var(--brd); border-radius: 4px; z-index: 10; box-shadow: 0 10px 30px #000; max-height: 400px; overflow-y: auto; scrollbar-width: none; }
        .head { background: #000; padding: 12px; text-align: center; font-size: 10px; font-weight: bold; cursor: move; border-bottom: 2px solid var(--main); text-transform: uppercase; position: sticky; top: 0; z-index: 20; }
        .mod { padding: 10px 12px; font-size: 11px; color: #777; border-bottom: 1px solid #1a1a1a; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .mod.on { color: white; background: var(--main); font-weight: bold; }
        .modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; background: #0c0c0c; border: 1px solid var(--main); padding: 20px; display: none; z-index: 2000; border-radius: 8px; }
        .row { display: flex; justify-content: space-between; margin: 12px 0; font-size: 13px; align-items: center; }
        .val-num { color: var(--main); font-weight: bold; min-width: 30px; text-align: right; }
        .btn { background: var(--main); border: none; color: white; width: 100%; padding: 10px; border-radius: 4px; margin-top: 8px; font-weight: bold; cursor: pointer; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; z-index: 1500; }
        input[type="range"] { width: 90px; accent-color: var(--main); }
    </style>
</head>
<body>

    <button id="panic-btn" onclick="panic()">PANIC</button>
    <div id="hud"></div>
    <div class="overlay" id="blur" onclick="closeAll()"></div>
    
    <div id="top-bar">
        <div class="box"><input type="text" id="cmd-input" placeholder="Search or %command..." onkeyup="handleInput(event)"></div>
    </div>

    <div class="modal" id="set-win">
        <h3 id="set-title" style="color:var(--main); margin:0 0 15px 0;">Settings</h3>
        <div id="set-body"></div>
        <div class="row" style="border-top: 1px solid #222; padding-top:10px;">
            <span>Keybind</span>
            <button id="bind-display" style="background:#222; color:var(--main); border:1px solid #444; padding:4px 8px; cursor:pointer;" onclick="startBinding()">NONE</button>
        </div>
        <button class="btn" onclick="closeAll()">SAVE</button>
    </div>

    <script>
        const categories = {
            "Combat": [
                { id: "aura", name: "KillAura", each: { Range: 4.2, CPS: 12, Walls: false } },
                { id: "velo", name: "Velocity", each: { Horizontal: 0, Vertical: 0 } },
                { id: "reach", name: "Reach", each: { Dist: 3.5 } },
                { id: "trig", name: "TriggerBot", each: { CPS: 10 } },
                { id: "crit", name: "Criticals", each: { Mode: 1 } },
                { id: "bot", name: "AntiBot", each: { Mode: 1 } },
                { id: "tpaura", name: "TPAura", each: { Range: 15 } },
                { id: "fastbow", name: "FastBow", each: { Power: 1 } },
                { id: "aim", name: "Aimbot", each: { FOV: 90 } }
            ],
            "Movement": [
                { id: "fly", name: "Fly", each: { Speed: 2.0 } },
                { id: "speed", name: "Speed", each: { Mode: 1 } },
                { id: "step", name: "Step", each: { Height: 1.5 } },
                { id: "long", name: "LongJump", each: { Boost: 2.5 } },
                { id: "jesus", name: "Jesus", each: { Speed: 0.4 } },
                { id: "spider", name: "Spider", each: { Speed: 0.3 } },
                { id: "noslow", name: "NoSlow", each: { Soulsand: true } },
                { id: "sprint", name: "AutoSprint", each: { Omni: true } },
                { id: "vclip", name: "VClip", each: { Dist: 5 } },
                { id: "hclip", name: "HClip", each: { Dist: 5 } },
                { id: "safe", name: "SafeWalk", each: { Edge: true } },
                { id: "blink", name: "Blink", each: { Packets: 20 } }
            ],
            "Visuals": [
                { id: "esp", name: "ESP", each: { Box: true } },
                { id: "trac", name: "Tracers", each: { Width: 1 } },
                { id: "chams", name: "Chams", each: { Alpha: 120 } },
                { id: "tags", name: "NameTags", each: { Scale: 1 } },
                { id: "full", name: "FullBright", each: { Gamma: 10 } },
                { id: "xray", name: "X-Ray", each: { Opacity: 100 } },
                { id: "lines", name: "Snaplines", each: { Color: 1 } },
                { id: "chest", name: "ChestESP", each: { Range: 64 } },
                { id: "trail", name: "Breadcrumbs", each: { Life: 5 } }
            ],
            "Player": [
                { id: "scaf", name: "Scaffold", each: { Delay: 50, Tower: true } },
                { id: "eat", name: "AutoEat", each: { Health: 15 } },
                { id: "tool", name: "AutoTool", each: { Weapons: true } },
                { id: "inv", name: "InvWalk", each: { Bypass: true } },
                { id: "mine", name: "AutoMine", each: { Range: 5 } },
                { id: "fast", name: "FastPlace", each: { Delay: 0 } },
                { id: "relog", name: "AutoRelog", each: { Delay: 5 } }
            ],
            "Exploit": [
                { id: "timer", name: "Timer", each: { Speed: 1.5 } },
                { id: "dis", name: "Disabler", each: { Mode: 1 } },
                { id: "phase", name: "Phase", each: { Dist: 0.2 } },
                { id: "crash", name: "ServerCrash", each: { Method: 1 } },
                { id: "packet", name: "PacketFly", each: { Speed: 0.3 } }
            ],
            "Misc": [
                { id: "chat", name: "Spammer", each: { Delay: 3000 } },
                { id: "skin", name: "Derp", each: { Speed: 10 } },
                { id: "noter", name: "NoteBot", each: { Song: 1 } }
            ]
        };

        let active = new Set(), modConfigs = {}, keybinds = {}, winPos = {}, currentId = null;

        function build() {
            let savedPos = localStorage.getItem('st_pos');
            winPos = savedPos ? JSON.parse(savedPos) : {};
            let x = 20, y = 120, count = 0;

            for (let cat in categories) {
                let win = document.createElement('div'); win.className = 'window';
                let pos = winPos[cat] || { x: x + 'px', y: y + 'px' };
                win.style.left = pos.x; win.style.top = pos.y;
                let h = document.createElement('div'); h.className = 'head'; h.textContent = cat;
                let l = document.createElement('div'); l.className = 'list';
                categories[cat].forEach(c => {
                    modConfigs[c.id] = c.each;
                    let m = document.createElement('div'); m.className = 'mod'; m.id = "btn-" + c.id;
                    m.innerHTML = `<span>${c.name}</span><span id="lbl-${c.id}" style="font-size:8px;opacity:0.5"></span>`;
                    m.onclick = () => toggle(c.id);
                    m.ondblclick = () => openSet(c.id, c.name);
                    l.appendChild(m);
                });
                win.appendChild(h); win.appendChild(l); document.body.appendChild(win);
                drag(win, h, cat);
                x += 185; count++; if(count >= 4) { x = 20; y += 420; count = 0; }
            }
            load();
        }

        function handleInput(e) {
            let val = e.target.value;
            if (e.key === "Enter" && val.startsWith("%")) {
                let args = val.substring(1).split(" ");
                let cmd = args[0].toLowerCase();
                if (cmd === "hclip" || cmd === "vclip") alert("Action: " + cmd + " " + args[1]);
                if (cmd === "bind") { keybinds[args[1]] = args[2].toUpperCase(); save(); load(); }
                e.target.value = "";
            } else {
                let q = val.toLowerCase();
                document.querySelectorAll('.mod').forEach(m => m.style.display = m.textContent.toLowerCase().includes(q) ? 'flex' : 'none');
            }
        }

        function toggle(id) {
            let el = document.getElementById("btn-" + id); if(!el) return;
            if(active.has(id)) { active.delete(id); el.classList.remove('on'); }
            else { active.add(id); el.classList.add('on'); }
            updateHUD(); save();
        }

        function openSet(id, name) {
            currentId = id; document.getElementById('set-title').textContent = name;
            document.getElementById('bind-display').textContent = keybinds[id] || "NONE";
            let b = document.getElementById('set-body'); b.innerHTML = '';
            let s = modConfigs[id];
            for(let k in s) {
                let r = document.createElement('div'); r.className = 'row'; r.innerHTML = `<span>${k}</span>`;
                let v = s[k]; let i;
                if(typeof v === 'number') {
                    let w = document.createElement('div'); w.style.display="flex"; w.style.alignItems="center";
                    i = document.createElement('input'); i.type='range'; i.min=0; i.max=20; i.step=0.1; i.value=v;
                    let d = document.createElement('span'); d.className='val-num'; d.textContent=v;
                    i.oninput = (e) => { s[k] = parseFloat(e.target.value); d.textContent=e.target.value; save(); };
                    w.appendChild(i); w.appendChild(d); i = w;
                } else if(typeof v === 'boolean') {
                    i = document.createElement('input'); i.type='checkbox'; i.checked=v;
                    i.onchange = (e) => { s[k]=e.target.checked; save(); };
                }
                r.appendChild(i); b.appendChild(r);
            }
            document.getElementById('set-win').style.display='block'; document.getElementById('blur').style.display='block';
        }

        function drag(w, h, cat) {
            let d = false, ox, oy;
            const s = (e) => { d = true; let c = e.touches ? e.touches[0] : e; ox = c.clientX-w.offsetLeft; oy = c.clientY-w.offsetTop; };
            const m = (e) => { if(!d) return; let c = e.touches ? e.touches[0] : e; w.style.left = (c.clientX-ox)+'px'; w.style.top = (c.clientY-oy)+'px'; };
            const stop = () => { if(d) { d = false; winPos[cat] = { x: w.style.left, y: w.style.top }; localStorage.setItem('st_pos', JSON.stringify(winPos)); } };
            h.addEventListener('mousedown', s); h.addEventListener('touchstart', s);
            window.addEventListener('mousemove', m); window.addEventListener('touchmove', m);
            window.addEventListener('mouseup', stop); window.addEventListener('touchend', stop);
        }

        function startBinding() {
            document.getElementById('bind-display').textContent = "...";
            const h = (e) => {
                let k = e.key.toUpperCase(); if(k==="ESCAPE") k=null;
                keybinds[currentId] = k; document.getElementById('bind-display').textContent = k||"NONE";
                document.getElementById('lbl-'+currentId).textContent = k||"";
                window.removeEventListener('keydown', h); save();
            };
            window.addEventListener('keydown', h);
        }

        window.addEventListener('keydown', (e) => {
            if(document.activeElement.tagName === "INPUT") return;
            let k = e.key.toUpperCase(); for(let id in keybinds) { if(keybinds[id] === k) toggle(id); }
        });

        function panic() { active.clear(); document.querySelectorAll('.mod').forEach(m => m.classList.remove('on')); updateHUD(); save(); }
        function updateHUD() { document.getElementById('hud').innerHTML = Array.from(active).sort().map(id => `<div class="hud-mod">${id}</div>`).join(''); }
        function closeAll() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); document.getElementById('blur').style.display = 'none'; }
        function save() { localStorage.setItem('st_a', JSON.stringify(Array.from(active))); localStorage.setItem('st_c', JSON.stringify(modConfigs)); localStorage.setItem('st_b', JSON.stringify(keybinds)); }
        function load() {
            let a=localStorage.getItem('st_a'), c=localStorage.getItem('st_c'), b=localStorage.getItem('st_b');
            if(b) { keybinds=JSON.parse(b); for(let id in keybinds) { if(document.getElementById('lbl-'+id)) document.getElementById('lbl-'+id).textContent=keybinds[id]; } }
            if(a) { active=new Set(JSON.parse(a)); active.forEach(id => { let el=document.getElementById("btn-"+id); if(el) el.classList.add('on'); }); updateHUD(); }
            if(c) { modConfigs=JSON.parse(c); }
        }
        build();
    </script>
</body>
</html>
